version: "3.8"

services:
  tool-git-mcp:
    build:
      context: .
      dockerfile: Dockerfile
    image: kamiwazaai/tool-git-mcp:1.0.0
    ports:
      - "8000"
    environment:
      - PORT=8000
      - MCP_PORT=8000
      - MCP_PATH=/mcp
      - GIT_WORKSPACE_ROOT=/app/workspace
      - GIT_AUTHOR_NAME=${GIT_AUTHOR_NAME:-Kamiwaza Bot}
      - GIT_AUTHOR_EMAIL=${GIT_AUTHOR_EMAIL:-bot@kamiwaza.ai}
      - GIT_COMMITTER_NAME=${GIT_COMMITTER_NAME:-Kamiwaza Bot}
      - GIT_COMMITTER_EMAIL=${GIT_COMMITTER_EMAIL:-bot@kamiwaza.ai}
    volumes:
      - workspace_data:/app/workspace
    extra_hosts:
      - "host.docker.internal:host-gateway"
    deploy:
      resources:
        limits:
          cpus: "2"
          memory: "2G"

volumes:
  workspace_data:
